{"version":3,"file":"index.test.cjs","sources":["../../../../../src/node/mods/index.test.ts"],"sourcesContent":["import { assert, test } from \"@hazae41/phobos\"\nimport { initBundledOnce, Sha1Hasher } from \"./index.js\"\n\nfunction equals(a: Uint8Array, b: Uint8Array) {\n  const ba = Buffer.from(a.buffer)\n  const bb = Buffer.from(b.buffer)\n\n  return ba.equals(bb)\n}\n\ntest(\"SHA-1\", async () => {\n  await initBundledOnce()\n\n  const hello = new TextEncoder().encode(\"Hello World\")\n\n  const hasher = new Sha1Hasher()\n  const hasher2 = new Sha1Hasher()\n\n  hasher.update(hello)\n  hasher2.update(hello)\n\n  const digest = hasher.finalize()\n  const digest2 = hasher2.finalize()\n\n  assert(equals(digest, digest2), `digests should be equal`)\n\n  hasher.update(hello)\n  hasher2.update(hello)\n\n  const digest3 = hasher.finalize()\n  const digest4 = hasher2.finalize()\n\n  assert(equals(digest3, digest4), `digests should be equal`)\n})"],"names":["test","__awaiter","initBundledOnce","Sha1Hasher","assert"],"mappings":";;;;;;;AAGA,SAAS,MAAM,CAAC,CAAa,EAAE,CAAa,EAAA;IAC1C,IAAM,EAAE,GAAG,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,MAAM,CAAC,CAAA;IAChC,IAAM,EAAE,GAAG,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,MAAM,CAAC,CAAA;AAEhC,IAAA,OAAO,EAAE,CAAC,MAAM,CAAC,EAAE,CAAC,CAAA;AACtB,CAAC;AAEDA,WAAI,CAAC,OAAO,EAAE,YAAA,EAAA,OAAAC,eAAA,CAAA,KAAA,CAAA,EAAA,KAAA,CAAA,EAAA,KAAA,CAAA,EAAA,YAAA;;;;oBACZ,OAAM,CAAA,CAAA,YAAAC,qBAAe,EAAE,CAAA,CAAA;;AAAvB,gBAAA,EAAA,CAAA,IAAA,EAAuB,CAAA;gBAEjB,KAAK,GAAG,IAAI,WAAW,EAAE,CAAC,MAAM,CAAC,aAAa,CAAC,CAAA;AAE/C,gBAAA,MAAM,GAAG,IAAIC,gBAAU,EAAE,CAAA;AACzB,gBAAA,OAAO,GAAG,IAAIA,gBAAU,EAAE,CAAA;AAEhC,gBAAA,MAAM,CAAC,MAAM,CAAC,KAAK,CAAC,CAAA;AACpB,gBAAA,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC,CAAA;AAEf,gBAAA,MAAM,GAAG,MAAM,CAAC,QAAQ,EAAE,CAAA;AAC1B,gBAAA,OAAO,GAAG,OAAO,CAAC,QAAQ,EAAE,CAAA;gBAElCC,aAAM,CAAC,MAAM,CAAC,MAAM,EAAE,OAAO,CAAC,EAAE,yBAAyB,CAAC,CAAA;AAE1D,gBAAA,MAAM,CAAC,MAAM,CAAC,KAAK,CAAC,CAAA;AACpB,gBAAA,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC,CAAA;AAEf,gBAAA,OAAO,GAAG,MAAM,CAAC,QAAQ,EAAE,CAAA;AAC3B,gBAAA,OAAO,GAAG,OAAO,CAAC,QAAQ,EAAE,CAAA;gBAElCA,aAAM,CAAC,MAAM,CAAC,OAAO,EAAE,OAAO,CAAC,EAAE,yBAAyB,CAAC,CAAA;;;;AAC5D,CAAA,CAAA,CAAA,EAAA,CAAC;;"}